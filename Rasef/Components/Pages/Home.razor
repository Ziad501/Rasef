@page "/home"
@using Rasef.Resources.Localization
@layout MainLayout
@inject IStringLocalizer<Strings> L
@inject CultureService Culture
@implements IDisposable

<!-- HERO -->
<div class="position-relative mx-n3 mx-sm-n4 mx-md-n5 hero-section"
     dir="@(Culture.IsArabic ? "rtl" : "ltr")">

    <div class="position-absolute w-100 h-100 hero-bg"></div>
    <div class="position-absolute w-100 h-100 hero-overlay"></div>

    <div class="position-absolute w-100 h-100 d-flex align-items-center justify-content-center text-white px-3">
        <div class="text-center animate-fade-in">
            <div class="mb-4">
                <i class="bi bi-laptop icon-xl" style="opacity:.9"></i>
            </div>

            <h1 class="display-5 fw-bold mb-3">@L["systemTitle"]</h1>
            <h2 class="h4 mb-4 fw-normal">@L["systemSubtitle"]</h2>
            <p class="lead mb-0 opacity-75">@L["agency"]</p>
        </div>
    </div>

    <div class="position-absolute bottom-0 start-0 w-100 lh-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 80" class="d-block w-100">
            <path class="wave-path"
                  d="M0,32L48,37.3C96,43,192,53,288,53.3C384,53,480,43,576,42.7C672,43,768,53,864,56C960,59,1056,53,1152,48C1248,43,1344,37,1392,34.7L1440,32L1440,80L0,80Z" />
        </svg>
    </div>
</div>

<!-- CARDS -->
<div class="container-fluid py-5" dir="@(Culture.IsArabic ? "rtl" : "ltr")">
    <div class="row g-4">

        <div class="col-12 col-sm-6 col-lg-3">
            <div class="card home-card position-relative border-0 shadow-sm h-100 rounded-4">
                <div class="card-body text-center p-4">
                    <div class="mb-3 icon-circle grad-blue">
                        <i class="bi bi-speedometer2 text-white icon-xl"></i>
                    </div>
                    <h5 class="card-title fw-bold mb-3 text-slate">@L["dashboard"]</h5>
                    <p class="text-muted small mb-0">@L["dashboardDesc"]</p>
                    <a href="/dashboard" class="stretched-link" aria-label="@(L["dashboard"])"></a>
                </div>
            </div>
        </div>

        <div class="col-12 col-sm-6 col-lg-3">
            <div class="card home-card position-relative border-0 shadow-sm h-100 rounded-4">
                <div class="card-body text-center p-4">
                    <div class="mb-3 icon-circle grad-green">
                        <i class="bi bi-check-circle text-white icon-xl"></i>
                    </div>
                    <h5 class="card-title fw-bold mb-3 text-slate">@L["workOrder"]</h5>
                    <p class="text-muted small mb-0">@L["workorderDesc"]</p>
                    <a href="/workorder/workflow" class="stretched-link" aria-label="@(L["workOrder"])"></a>
                </div>
            </div>
        </div>

        <div class="col-12 col-sm-6 col-lg-3">
            <div class="card home-card position-relative border-0 shadow-sm h-100 rounded-4">
                <div class="card-body text-center p-4">
                    <div class="mb-3 icon-circle grad-orange">
                        <i class="bi bi-clipboard-data text-white icon-xl"></i>
                    </div>
                    <h5 class="card-title fw-bold mb-3 text-slate">@L["reports"]</h5>
                    <p class="text-muted small mb-0">@L["reportsDesc"]</p>
                    <a href="/reports" class="stretched-link" aria-label="@(L["reports"])"></a>
                </div>
            </div>
        </div>

        <div class="col-12 col-sm-6 col-lg-3">
            <div class="card home-card position-relative border-0 shadow-sm h-100 rounded-4">
                <div class="card-body text-center p-4">
                    <div class="mb-3 icon-circle grad-purple">
                        <i class="bi bi-people text-white icon-xl"></i>
                    </div>
                    <h5 class="card-title fw-bold mb-3 text-slate">@L["userManagement"]</h5>
                    <p class="text-muted small mb-0">@L["userDesc"]</p>
                    <a href="/users" class="stretched-link" aria-label="@(L["userManagement"])"></a>
                </div>
            </div>
        </div>

    </div>
</div>

@code
{
    protected override void OnInitialized()
    {
        // Subscribe to culture changes
        Culture.OnChange += HandleCultureChanged;
    }

    private void HandleCultureChanged()
    {
        InvokeAsync(StateHasChanged);
    }

    public void Dispose()
    {
        // Unsubscribe from culture changes
        Culture.OnChange -= HandleCultureChanged;
    }
}
