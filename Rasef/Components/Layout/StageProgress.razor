@using System.Globalization

@code {
    [Parameter] public int CurrentStageIndex { get; set; } = 1; // 1..7
    [Parameter] public string Lang { get; set; } = "AR";        // "AR" or "EN"

    private readonly string[] StagesEn = new[]
    {
        "Consultant","Project Manager","Department Manager","Municipality Head","Excavations","General Manager","Contractor"
    };
    private readonly string[] StagesAr = new[]
    {
        "الاستشاري","مدير المشروع","مدير الإدارة","رئيس البلدية","الحفريات","مدير عام الإدارة","المقاول"
    };

    private IEnumerable<string> Labels => Lang == "AR" ? StagesAr : StagesEn;
    private string Percent => Math.Clamp((int)Math.Round((CurrentStageIndex / 7.0) * 100), 0, 100) + "%";
}
<div class="mb-3">
    <div class="progress" role="progressbar" aria-valuenow="@Percent" aria-valuemin="0" aria-valuemax="100">
        <div class="progress-bar" style="width:@Percent"></div>
    </div>
    <div class="d-flex justify-content-between flex-wrap gap-2 mt-2">
        @{
            var i = 0;
            foreach (var s in Labels)
            {
                i++;
                var active = i <= CurrentStageIndex;
                <span class="badge @(active ? "bg-primary" : "bg-secondary")">@s</span>
            }
        }
    </div>
</div>
