@inherits LayoutComponentBase

<CascadingValue Value="currentLanguage">
    <CascadingValue Value="isDarkMode">
        <div class="min-vh-100 d-flex flex-column"
             data-bs-theme="@(isDarkMode ? "dark" : "light")"
             dir="@(currentLanguage == "AR" ? "rtl" : "ltr")">

            <SharedTopBar CurrentLanguage="@currentLanguage"
                          OnLanguageChanged="HandleLanguageChange"
                          IsDarkMode="@isDarkMode"
                          OnThemeChanged="HandleThemeChange" />

            <main class="flex-grow-1 overflow-auto">
                <div class="container-fluid py-4">
                    @Body
                </div>
            </main>
        </div>
    </CascadingValue>
</CascadingValue>

@code {
    private string currentLanguage = "AR";
    private bool isDarkMode = false;

    private void HandleLanguageChange(string newLanguage) { currentLanguage = newLanguage; StateHasChanged(); }
    private void HandleThemeChange(bool darkMode) { isDarkMode = darkMode; StateHasChanged(); }
}
